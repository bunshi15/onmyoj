# Onmyoj: Мини-чеклист по структурированию CLI и отчётов

## 1. Рефакторинг
- [x] Перенести все SQL-запросы и функции из analyze_channels.py и view_data.py в отдельный CLI-модуль (например, modules/db_cli.py).
- [x] Удалить старые скрипты, оставить только основной CLI для работы с БД.
- [x] Вынести повторяющиеся функции (например, коннект к БД, формирование топов) в утилиты.

## 2. Расширение CLI
- [x] Добавить команды для:
    - [x] Просмотра видео
    - [x] Просмотра каналов (с топ-фильтрами и анализом контактов)
    - [x] Просмотра/поиска контактов (по типу, по тексту, по видео/каналу)
    - [x] Статистики (все count, топы)
    - [x] Экспорта (txt/csv/html отчёты по контактам каналов)
- [x] Сделать --limit, --sort, --search фильтры для каждой команды (если возможно)

## 3. Отчёты
- [x] Реализовать модуль генерации отчётов (csv, html)
- [ ] Добавить сводный отчёт (summary/top-10/группы)

## 4. Пользовательский опыт
- [x] CLI-описания и --help для каждой команды
- [ ] Обработка ошибок и вывод статусов
- [ ] (По желанию) Поддержка параметров через config.yaml/env (например, путь к БД)

## 5. Для будущего
- [ ] Визуализация связей и данных (web/viewer/graph)
- [ ] Экспорт дампа для анализа (например, для Pandas/Excel)

---

**Текущий статус:**
- [x] Сбор, парсинг, сохранение видео/каналов/контактов
- [x] Тесты на пайплайн и БД
- [ ] Унифицированный CLI и отчёты
- [ ] Веб-интерфейс/визуализация

---

_Далее можно расширять по задачам:_
- Внедрить CLI по командам
- Тестировать/рефакторить SQL-запросы и отчёты
- Добавить новые источники/форматы вывода
